<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {# İlan başlığını dinamik olarak ayarla #}
    <title>{{ auction.title }} | Mezsat</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .heart-animation {
            animation: heartBeat 0.8s;
        }
        @keyframes heartBeat {
            0% { transform: scale(1); }
            14% { transform: scale(1.3); }
            28% { transform: scale(1); }
            42% { transform: scale(1.3); }
            70% { transform: scale(1); }
        }
        .progress-bar {
            height: 6px;
            border-radius: 3px;
            background-color: #e5e7eb;
            overflow: hidden;
        }
        .progress-value {
            height: 100%;
            background-color: #6366f1;
            transition: width 0.3s ease;
        }
        .comment-box {
            transition: all 0.3s ease;
        }
        .comment-box:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Navbar -->
    {# Navbar içeriği statik kalabilir veya kullanıcı durumuna göre dinamik hale getirilebilir #}
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center">
                        <a href="/" class="flex items-center">
                            <i class="fas fa-gavel text-indigo-600 text-2xl mr-2"></i>
                            <span class="text-xl font-bold text-gray-900">Mezsat</span>
                        </a>
                    </div>
                </div>
                <div class="hidden md:ml-6 md:flex md:items-center md:space-x-4">
                    <a href="/" class="px-3 py-2 text-gray-700 hover:text-indigo-600 transition">Ana Sayfa</a>
                    <a href="#" class="px-3 py-2 text-gray-700 hover:text-indigo-600 transition">Kategoriler</a>
                    <a href="#" class="px-3 py-2 text-gray-700 hover:text-indigo-600 transition">Nasıl Çalışır?</a>
                    <div class="flex items-center space-x-4">
                        <div class="relative group">
                            <button class="flex items-center space-x-1 text-gray-700 hover:text-indigo-600">
                                <span>john_doe</span>
                                <i class="fas fa-chevron-down text-xs"></i>
                            </button>
                            <div class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 hidden group-hover:block z-50">
                                <a href="profile.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Profilim</a>
                                <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Favorilerim</a>
                                <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">İlanlarım</a>
                                <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Çıkış Yap</a>
                            </div>
                        </div>
                        <a href="#" class="px-3 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition">
                            <i class="fas fa-plus mr-1"></i> İlan Ver
                        </a>
                    </div>
                </div>
                <div class="-mr-2 flex items-center md:hidden">
                    <button class="inline-flex items-center justify-center p-2 rounded-md text-gray-700 hover:text-indigo-600 focus:outline-none">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Product Detail Section -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="bg-white rounded-lg shadow-lg overflow-hidden">
            <!-- Product Images Gallery -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 p-6">
                <!-- Main Image -->
                <div class="relative h-96 rounded-lg overflow-hidden">
                    {# Ana resmi dinamik olarak göster #}
                    {% if auction.image %}
                        <img src="{{ auction.image.url }}" alt="{{ auction.title }}" class="w-full h-full object-cover">
                    {% else %}
                        {# Varsayılan bir resim gösterilebilir #}
                        <img src="https://via.placeholder.com/800x600?text=Resim+Yok" alt="{{ auction.title }}" class="w-full h-full object-cover">
                    {% endif %}
                    <button id="favorite-btn" class="absolute top-4 right-4 p-3 bg-white rounded-full shadow-md text-red-500 hover:bg-red-50 transition">
                        {# Favori durumu dinamik olarak ayarlanabilir #}
                        <i class="fas fa-heart text-xl"></i>
                    </button>
                </div>

                <!-- Product Info -->
                <div class="space-y-6">
                    <div>
                        {# İlan başlığını ve kategorisini dinamik olarak göster #}
                        <h1 class="text-3xl font-bold text-gray-900">{{ auction.title }}</h1>
                        <div class="flex items-center mt-2">
                            <span class="text-indigo-600 font-medium">{{ auction.category.name }}</span> {# Kategori modeline göre ayarlayın #}
                        </div>
                    </div>

                    <div class="border-t border-b border-gray-200 py-6">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-sm text-gray-500">Mevcut teklif</p>
                                {# Mevcut teklifi dinamik olarak göster #}
                                <p class="text-3xl font-bold text-indigo-600">{{ auction.current_bid.amount|default:"Teklif Yok" }} ₺</p> {# Varsayılan değer eklenebilir #}
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Başlangıç fiyatı</p>
                                {# Başlangıç fiyatını dinamik olarak göster #}
                                <p class="text-xl font-bold text-gray-700">{{ auction.starting_price }} ₺</p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500">Satılık fiyatı</p>
                                {# Hemen Al fiyatını dinamik olarak göster (varsa) #}
                                <p class="text-xl font-bold text-gray-700">{{ auction.buy_now_price|default:"-" }} ₺</p> {# Varsayılan değer eklenebilir #}
                            </div>
                        </div>
                    </div>

                    <!-- Auction Timer -->
                    <div class="space-y-4">
                        <div>
                            <div class="flex justify-between text-sm text-gray-600 mb-1">
                                <span>Kalan süre</span>
                                {# Kalan süreyi dinamik olarak göster (timeuntil filtresi veya özel bir context değişkeni ile) #}
                                <span> {{ time_left }} gün</span>
                                <span>{{ auction.end_date|timeuntil }}</span> {# Veya daha detaylı formatlama gerekebilir #}
                            </div>
                            <div class="progress-bar">
                                {# İlerleme çubuğu dinamik olarak hesaplanabilir #}
                                <div class="progress-value" style="width: 75%"></div> {# Genişlik dinamik olmalı #}
                            </div>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <p class="text-sm text-gray-500">Teklif sayısı</p>
                                {# Teklif sayısını dinamik olarak göster #}
                                <p class="text-lg font-semibold">{{ auction.bids.count }}</p> {# bids ilişkili model yöneticisi varsayıldı #}
                            </div>
                            <div>
                                <p class="text-sm text-gray-500 text-right">İlan Oluşturulma Tarihi</p>
                                
                                <p class="text-lg font-semibold text-right">{{ auction.created_at }}</p> 
                            </div>
                        </div>
                    </div>

                    <!-- Bid Form -->
                    {# Teklif formu işlevselliği ayrı bir view/form ile yönetilmeli #}
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h3 class="text-lg font-medium mb-4">Teklif Ver</h3>
                        <div class="flex space-x-2">
                            <input id="bid-amount-input" type="number" placeholder="Teklif miktarı" class="flex-1 border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            <button id="bid-submit-button" class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition">
                                Gönder
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Product Details Tabs -->
            <div class="border-t border-gray-200">
                <nav class="flex divide-x divide-gray-200">
                    <button id="description-tab" class="flex-1 py-4 px-6 text-center text-sm font-medium text-indigo-600 bg-indigo-50">Açıklama</button>
                    {# Teklif ve yorum sayılarını dinamik olarak göster #}
                    <button id="bids-tab" class="flex-1 py-4 px-6 text-center text-sm font-medium text-gray-500 hover:text-gray-700 hover:bg-gray-50">Teklifler ({{ auction.bids.count }})</button>
                    <button id="comments-tab" class="flex-1 py-4 px-6 text-center text-sm font-medium text-gray-500 hover:text-gray-700 hover:bg-gray-50">Yorumlar ({{ auction.comments.count }})</button> {# comments ilişkili model yöneticisi varsayıldı #}
                </nav>

                <!-- Tab Contents -->
                <div class="divide-y divide-gray-200">
                    <!-- Description Content -->
                    <div id="description-content" class="p-6">
                        <h2 class="text-xl font-semibold mb-4">Ürün Açıklaması</h2>
                        {# Açıklamayı dinamik olarak göster, HTML içeriyorsa 'safe' filtresi kullan #}
                        <div class="prose max-w-none text-gray-600">
                            {{ auction.description|safe }}
                        </div>
                    </div>

                    <!-- Bids Content (Hidden by default) -->
                    <div id="bids-content" class="hidden p-6">
                        <h2 class="text-xl font-semibold mb-4">Teklif Geçmişi</h2>
                        <div class="space-y-4">
                            {# Teklifleri döngü ile listele #}
                            {% for bid in auction.bids.all %} {# bids ilişkili model yöneticisi varsayıldı #}
                            <div class="flex items-start p-4 bg-gray-50 rounded-lg">
                                {# Kullanıcı profil resmi eklenebilir #}
                                {# <img src="{{ bid.user.profile_image.url }}" alt="{{ bid.user.username }}" class="h-10 w-10 rounded-full mr-4"> #}
                                <div class="flex-1">
                                    <div class="flex justify-between">
                                        <h4 class="font-medium">{{ bid.user.username }}</h4> {# user ilişkisi varsayıldı #}
                                        <span class="text-sm text-gray-500">{{ bid.created_at|timesince }} önce</span> {# timestamp alanı varsayıldı #}
                                    </div>
                                    <p class="text-2xl font-bold text-indigo-600 mt-1">{{ bid.amount }} ₺</p> {# amount alanı varsayıldı #}
                                </div>
                            </div>
                            {% empty %}
                            <p class="text-gray-500">Henüz teklif yapılmamış.</p>
                            {% endfor %}
                        </div>
                    </div>

                    <!-- Comments Content (Hidden by default) -->
                    <div id="comments-content" class="hidden p-6">
                        <h2 class="text-xl font-semibold mb-4">Ürün Yorumları</h2>

                        <!-- Comment Form -->
                        {# Yorum formu işlevselliği ayrı bir view/form ile yönetilmeli #}
                        <div class="mb-8 bg-gray-50 p-4 rounded-lg">
                            <h3 class="text-lg font-medium mb-4">Yorum Yap</h3>
                            <textarea rows="3" class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="Yorumunuzu buraya yazın..."></textarea>
                            <div class="flex justify-end mt-3">
                                <button class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition">
                                    Gönder
                                </button>
                            </div>
                        </div>

                        <!-- Comments List -->
                        <div class="space-y-6">
                            {# Yorumları döngü ile listele #}
                            {% for comment in auction.comments.all %} {# comments ilişkili model yöneticisi varsayıldı #}
                            <div class="comment-box bg-white p-6 rounded-lg shadow-sm">
                                <div class="flex items-start">
                                    {# Kullanıcı profil resmi eklenebilir #}
                                    {# <img src="{{ comment.user.profile.image.url }}" alt="{{ comment.user.username }}" class="h-10 w-10 rounded-full mr-4"> #}
                                    <div class="flex-1">
                                        <div class="flex justify-between">
                                            <h4 class="font-medium">{{ comment.user.username }}</h4> {# user ilişkisi varsayıldı #}
                                            <span class="text-sm text-gray-500">{{ comment.created_at|timesince }} önce</span> {# created_at alanı varsayıldı #}
                                        </div>
                                        <div class="mt-3">
                                            <p class="text-gray-700">{{ comment.text }}</p> {# text alanı varsayıldı #}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% empty %}
                            <p class="text-gray-500">Henüz yorum yapılmamış.</p>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Seller Info -->
            <div class="border-t border-gray-200 p-6">
                <h2 class="text-xl font-semibold mb-4">Satıcı Bilgileri</h2>
                <div class="flex items-start">
                    {# Satıcı profil resmi eklenebilir #}
                    {% if auction.owner.profile_image %}
                    <img src="{{ auction.owner.profile_image.url }}" alt="{{ auction.owner.username }}" class="w-12 h-12 rounded-full mr-3">
                {% else %}
                    <div class="w-12 h-12 rounded-full bg-gray-300 mr-3 flex items-center justify-center">
                        <i class="fas fa-user text-white"></i>
                    </div>
                {% endif %}
                    <div class="flex-1">
                        {# Satıcı adını dinamik olarak göster #}
                        <h3 class="text-lg font-medium  flex items-center mt-2 ">{{ auction.owner.username  }}</h3> 
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white mt-12">
        <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-lg font-semibold mb-4">Mezsat</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-300 hover:text-white">Hakkımızda</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Kariyer</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Basın</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Yardım</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-300 hover:text-white">Sıkça Sorulan Sorular</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Güvenlik</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">İletişim</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Kurallar</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-300 hover:text-white">Kullanım Koşulları</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Gizlilik Politikası</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Çerez Politikası</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Bizi Takip Edin</h3>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-300 hover:text-white"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-gray-300 hover:text-white"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-gray-300 hover:text-white"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-gray-300 hover:text-white"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                    <div class="mt-4">
                        <p class="text-gray-300">Uygulamayı indirin:</p>
                        <div class="flex space-x-2 mt-2">
                            <a href="#" class="block"><img src="https://via.placeholder.com/120x40?text=App+Store" alt="App Store" class="h-10"></a>
                            <a href="#" class="block"><img src="https://via.placeholder.com/120x40?text=Google+Play" alt="Google Play" class="h-10"></a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mt-12 pt-8 border-t border-gray-700 text-center">
                <p class="text-gray-400">© 2023 Mezsat. Tüm hakları saklıdır.</p>
            </div>
        </div>
    </footer>

    <script>
        // Tab switching logic
        const descriptionTab = document.getElementById('description-tab');
        const bidsTab = document.getElementById('bids-tab');
        const commentsTab = document.getElementById('comments-tab');
        const descriptionContent = document.getElementById('description-content');
        const bidsContent = document.getElementById('bids-content');
        const commentsContent = document.getElementById('comments-content');

        const tabs = [descriptionTab, bidsTab, commentsTab];
        const contents = [descriptionContent, bidsContent, commentsContent];

        tabs.forEach((tab, index) => {
            tab.addEventListener('click', () => {
                // Reset all tabs and contents
                tabs.forEach(t => {
                    t.classList.remove('text-indigo-600', 'bg-indigo-50');
                    t.classList.add('text-gray-500', 'hover:text-gray-700', 'hover:bg-gray-50');
                });
                contents.forEach(c => c.classList.add('hidden'));

                // Activate clicked tab and content
                tab.classList.add('text-indigo-600', 'bg-indigo-50');
                tab.classList.remove('text-gray-500', 'hover:text-gray-700', 'hover:bg-gray-50');
                contents[index].classList.remove('hidden');
            });
        });

        // Favorite button animation (example)
        const favoriteBtn = document.getElementById('favorite-btn');
        favoriteBtn.addEventListener('click', () => {
            const icon = favoriteBtn.querySelector('i');
            icon.classList.toggle('text-red-500'); // Toggle color
            icon.classList.toggle('text-gray-400'); // Toggle color
            icon.classList.add('heart-animation');
            setTimeout(() => icon.classList.remove('heart-animation'), 800);
            // Add logic here to actually save/remove favorite via API
        });

        // Mobile menu toggle (example, adjust if needed)
        // ... (Navbar'daki mobil menü script'i buraya da eklenebilir veya merkezi bir JS dosyasından yönetilebilir) ...

    </script>
</body>
</html>